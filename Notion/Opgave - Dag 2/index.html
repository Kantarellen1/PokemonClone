<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <script>
      // Her er teksten defineret som ingenting//
      let txt = "";
      //Den asynkrone funktion der kalder api kaldet//
      async function APIKald() {
        //ændret ind til postNummer, her bliver værdien taget af det indsatte ord og sat sammen med apien//
        postNummer = document.getElementById("postNummer").value;
        url = "https://api.dataforsyningen.dk/postnumre/" + postNummer;

        var req = new Request(url); // Request til hjemmeside

        const response = await fetch(req); //Her fetcher den data
        const Objekt = await response.json();
        
        //Der hvor dataen bliver smækket ind efter tryk på knap
        document.getElementById("id1").innerHTML =
          Objekt.nr + " " + Objekt.navn;
        txt = "";
        //Der hvor dataen bliver smækket ind efter tryk på knap, men med funktionen nedenunder
        Objekt.kommuner.forEach(myFunction);
        document.getElementById("ud").innerHTML = txt;
      }
      function myFunction(value, index, array) {
        txt += index + 1 + " " + value.navn + "<br>";
      }
      console.log();
    </script>
    <meta charset="utf-8" />
    <title>MAGS - GET /u kommentar</title>
  </head>
  <body>
    <a
      target="_blank"
      href="https://www.notion.so/mercantec/Forst-et-API-kald-skrevet-i-JS-6babd52d4eba45bca873ab655d2cd278"
    >
      Opgave beskrivelse
    </a>
    <br />
    <input id="postNummer" type="number" value="" placeholder="6000"/>
    <button type="button" onclick="APIKald()">Button</button>
    <p id="id1"></p>
    <p id="ud"></p>
  </body>
</html>
